(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{140:function(e,t,a){},144:function(e,t,a){},145:function(e,t,a){},171:function(e,t,a){},186:function(e,t,a){},191:function(e){e.exports=[{title:"Daily Mail UK",url:"https://www.sleepphones.com/sites/default/files/styles/blog_image/public/Daily-Mail-Logo_0.png?itok=atnTYFWs",source:"https://www.dailymail.co.uk/home/index.html",description:"Daily Mail United Kingdom"},{title:"Google News",url:"https://i1.wp.com/www.theideapress.com/wp-content/uploads/2017/11/how-to-get-your-website-listed-on-google-news.png",source:"https://news.google.com/",description:"One of the largest news websites"},{title:"Business Insider",url:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1556866124423&di=469ebab6d646d0ecb85c931822e40bc3&imgtype=0&src=http%3A%2F%2Fi1.sinaimg.cn%2Fcj%2F2014%2F0107%2FU5404P31DT20140107082302.jpg",source:"https://www.businessinsider.com/",description:"Fast-growing business site with deep financial verticals. "}]},195:function(e){e.exports=[{name:"Tinghui(Rick) Liao",url:"https://www.linkedin.com/in/tinghui-liao/",position:"Team leader",img:"https://media.licdn.com/dms/image/C5103AQGOkLJT8JyjZg/profile-displayphoto-shrink_200_200/0?e=1561593600&v=beta&t=b_XLu2U_b4xix9rX6VVna2QPTfCz-D9MjY_l3TxyGRU",description:"I'm responsible for frontend and design",github:"https://github.com/DeepinSC",linkedin:"https://www.linkedin.com/in/tinghui-liao"},{name:"Jingyu Li",url:"https://www.linkedin.com/in/jingyu-li-651878156/",position:"Team member",img:"https://i.postimg.cc/L5bfD4hM/IMG-0215.jpg",description:"I'm responsible for frontend and design",github:"https://github.com/beijingjack",linkedin:"https://www.linkedin.com/in/jingyu-li-651878156/"},{name:"Kun Qiao",url:"https://www.linkedin.com/in/kun-qiao-753719111/",position:"Team member",img:"https://media.licdn.com/dms/image/C5103AQEUOpaonwfW4w/profile-displayphoto-shrink_200_200/0?e=1562198400&v=beta&t=7ixIPVeFnz9tuYplsoFDtJubomDrHaPqV7LdozzsoGs",description:"I'm responsible for backend and database",github:"https://github.com/Qko0kQ",linkedin:"https://www.linkedin.com/in/kun-qiao-753719111/"},{name:"Haoqi Hu",url:"https://www.linkedin.com/in/haoqihu266/",position:"Team member",img:"https://media.licdn.com/dms/image/C4E03AQF1V3RmPV1_KA/profile-displayphoto-shrink_200_200/0?e=1562198400&v=beta&t=PbPRqLVzSjOwDpguhvIHZ7-I7h0aTYVCkIE5s42_B9s",description:"I'm responsible for backend and database",github:"https://github.com/kevinhhq",linkedin:"https://www.linkedin.com/in/haoqihu266/"}]},198:function(e,t,a){e.exports=a(386)},203:function(e,t,a){},204:function(e,t,a){},205:function(e,t,a){},283:function(e,t,a){},373:function(e,t,a){},379:function(e,t,a){},380:function(e,t,a){},381:function(e,t,a){},382:function(e,t,a){},386:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(8),i=a.n(s),l=(a(203),a(14)),c=a(15),o=a(18),u=a(17),m=a(19),d=(a(204),a(402)),h=a(409),p=a(406),f=a(403),g=a(408),E=(a(144),a(205),a(393)),w=a(396),b=a(399),y=a(389),v=(a(145),a(143)),k=a(394),O=a(401),N=a(76),j=a(12),S=a(26),C=a.n(S),I=a(388),A=v.a.TabPane,P=k.a.Meta,U=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={news:[],loading:!0},a.onTabChange=function(e){a.setState({loading:!0,news:[]}),C.a.get("http://18.191.243.106:3000/api/offline/category/".concat(e)).then(function(e){a.setState({news:e.data.slice(0,3),loading:!1})}).catch(function(e){console.log(e),a.setState({news:[],loading:!1})})},a.renderCard=function(){return a.state.loading?r.a.createElement(O.a,null):0===a.state.news.length?r.a.createElement(N.a,null):r.a.createElement("div",{className:"news-card-list"},a.state.news.map(function(e,t){return r.a.createElement(I.a,{key:t,to:{pathname:"/news/".concat(e.newsId),state:{news:e}}},r.a.createElement(k.a,{className:"news-card",style:{margin:5,width:290},key:t,hoverable:!0,bordered:!1,cover:e.img?r.a.createElement("img",{src:e.img,alt:"N/A"}):r.a.createElement(N.a,{description:" "})},r.a.createElement(P,{title:e.title}),r.a.createElement("div",null,r.a.createElement(j.a,{type:"clock-circle"}),e.time)))}))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0,news:[]}),C.a.get("http://18.191.243.106:3000/api/offline/category/business").then(function(t){e.setState({news:t.data.slice(0,3),loading:!1})}).catch(function(t){console.log(t),e.setState({news:[],loading:!1})})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(v.a,{defaultActiveKey:"1",onChange:this.onTabChange},r.a.createElement(A,{tab:"Business",key:"business"},this.renderCard()),r.a.createElement(A,{tab:"Technology",key:"technology"},this.renderCard()),r.a.createElement(A,{tab:"Entertainment",key:"entertainment"},this.renderCard()),r.a.createElement(A,{tab:"Sports",key:"sports"},this.renderCard()),r.a.createElement(A,{tab:"Science",key:"science"},this.renderCard()),r.a.createElement(A,{tab:"Health",key:"health"},this.renderCard()))))}}]),t}(n.Component),D=(a(283),a(35)),M=a(191),x=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={mockData:M},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"media-card-list"},0===this.state.mockData.length?r.a.createElement(O.a,null):this.state.mockData.map(function(e){return r.a.createElement(k.a,{key:e.title,hoverable:!0,bordered:!1,style:{width:240},cover:r.a.createElement(I.a,{to:"news/?source=".concat(e.title)},r.a.createElement("img",{alt:"example",src:e.url,style:{width:"100%"}}))},r.a.createElement("div",null,r.a.createElement("h3",null,e.title,r.a.createElement(D.a,{icon:"link",shape:"circle",className:"site-list-menu",href:e.source}))),r.a.createElement("div",null,e.description))}))}}]),t}(n.Component),F=E.a.Option,T=w.a.Search,R=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={input:"",select:"news"},a.selectBefore=function(){return r.a.createElement(E.a,{defaultValue:a.state.select,style:{width:90},onChange:a.onSelectChange},r.a.createElement(F,{value:"news"},"News"),r.a.createElement(F,{value:"source"},"Source"))},a.onSelectChange=function(e){a.setState({select:e})},a.onInputChange=function(e){a.setState({input:e.target.value})},a.onInputSubmit=function(){a.state.input?window.location.href="/news/?".concat(a.state.select,"=").concat(a.state.input):b.a.error("Input cannot be empty!")},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Home"},r.a.createElement("article",{className:"home-container"},r.a.createElement("section",null,r.a.createElement("div",{className:"home-container-title"},r.a.createElement("h1",{className:"main-title"},"GOATNews - Progressive Web Application"),r.a.createElement("h1",{className:"sub-title"},"Read news anywhere")),r.a.createElement("div",{className:"search-bar"},r.a.createElement(T,{addonBefore:this.selectBefore(),placeholder:"input search text",onChange:this.onInputChange,onSearch:this.onInputSubmit}))),r.a.createElement("section",{className:"home-sections"},r.a.createElement(I.a,{to:"/news/"},r.a.createElement("h1",null," Trend News")),r.a.createElement(U,null)),r.a.createElement(y.a,null),r.a.createElement("section",{className:"home-sections"},r.a.createElement("h1",null," Hot Sources"),r.a.createElement(x,null)),r.a.createElement(y.a,null)))}}]),t}(n.Component),L=(a(171),a(392)),V=a(397),B=a(390),z=a(16),_=a(44),H=a(54),q=a.n(H),G=function(){function e(){Object(l.a)(this,e),this.user={isAnonymous:!0,channels:{},readNews:{}},this.state={loading:!0}}return Object(c.a)(e,[{key:"fetchUserState",value:function(){var e=this;this.state.loading=!0,q.a.auth().onAuthStateChanged(function(t){t?(e.user=t,e.user.channels={},e.user.readNews={},C.a.get("http://18.191.243.106:3000/api/user/".concat(e.user.uid)).then(function(t){e.user.channels=t.data.channel,e.user.readNews=t.data.recentread,e.state.loading=!1})):(console.log("Not login"),e.state.loading=!1)}),this.state.loading=!1}},{key:"signUp",value:function(e,t){var a=this;return this.error={code:0,message:""},C.a.post("http://18.191.243.106:3000/api/user/register",{email:e,password:t}).then(function(e){a.user=e.data}).then(function(n){return a.signIn(e,t)}).catch(function(e){return console.log(e)})}},{key:"signIn",value:function(e,t){var a=this;return this.error={code:0,message:""},q.a.auth().signInWithEmailAndPassword(e,t).then(function(e){a.user=e.user,a.user.channels={},a.user.readNews={}}).then(function(e){C.a.get("http://18.191.243.106:3000/api/user/".concat(a.user.uid)).then(function(e){a.user.channels=e.data.channel,a.user.readNews=e.data.recentread})})}},{key:"signOut",value:function(){var e=this;return this.error={code:0,message:""},q.a.auth().signOut().then(function(t){e.user={isAnonymous:!0}}).catch(function(t){e.state=t})}}]),e}();Object(z.g)(G,{user:z.l,state:z.l,fetchUserState:z.d,signUp:z.d,signIn:z.d,signOut:z.d});var W=new G,K=a(398),Q=a(407),J=a(395),Y=(a(373),K.a.Button),X=K.a.Group,Z=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={radioValue:"in",email:"",password:"",passwordConfirm:""},a.onRadioChange=function(e){a.setState({radioValue:e.target.value})},a.onEmailInputChange=function(e){a.setState({email:e.target.value})},a.onPasswordInputChange=function(e){a.setState({password:e.target.value})},a.onConfirmPasswordInputChange=function(e){a.setState({passwordConfirm:e.target.value})},a.renderSignIn=function(){return r.a.createElement("div",{className:"user-input"},r.a.createElement("p",null,"Email Address"),r.a.createElement(w.a,{placeholder:"Email Address",suffix:r.a.createElement(j.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),onChange:a.onEmailInputChange,value:a.state.email}),r.a.createElement("p",null,"Password"),r.a.createElement(w.a.Password,{placeholder:"Password",onChange:a.onPasswordInputChange,value:a.state.password}))},a.renderSignUp=function(){return r.a.createElement("div",{className:"user-input"},r.a.createElement("p",null,"Email Address"),r.a.createElement(w.a,{placeholder:"Email Address",suffix:r.a.createElement(j.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),onChange:a.onEmailInputChange,value:a.state.email}),r.a.createElement("p",null,"Password"),r.a.createElement(w.a.Password,{placeholder:"Password",onChange:a.onPasswordInputChange,value:a.state.password}),r.a.createElement("p",null,"Confirm Password"),r.a.createElement(w.a.Password,{placeholder:"Confirm Password",onChange:a.onConfirmPasswordInputChange,value:a.state.passwordConfirm}),a.state.password!==a.state.passwordConfirm&&r.a.createElement(Q.a,{description:"Two passwords must be same.",type:"error",showIcon:!0}))},a.isSubmitDisabled=function(e){var t=!(a.state.email&&a.state.password);return"in"!==e&&(t=t||a.state.password!==a.state.passwordConfirm),t},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.radioValue;return r.a.createElement("div",null,r.a.createElement(J.a,{title:"Sign in/up",visible:this.props.visible,onOk:this.props.submit(this.state.email,this.state.password,"in"===e),onCancel:this.props.handleModalClose,okButtonProps:{disabled:this.isSubmitDisabled(e)},okText:"in"===e?"Sign In":"Sign Up"},r.a.createElement("div",null,r.a.createElement(X,{onChange:this.onRadioChange,defaultValue:e,buttonStyle:"solid"},r.a.createElement(Y,{value:"in"},"Sign In"),r.a.createElement(Y,{value:"up"},"Sign Up")),r.a.createElement(y.a,{dashed:!0}),"in"===e?this.renderSignIn():this.renderSignUp())))}}]),t}(n.Component),$=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleModalClose=function(){return a.setState({modalVisible:!1})},a.handleModalOpen=function(){return a.setState({modalVisible:!0})},a.handleModalSubmit=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(){n?W.signIn(e,t).then(function(e){b.a.success("Sign in successfully"),a.setState({modalVisible:!1})}).catch(function(e){b.a.error(e.message),a.setState({modalVisible:!0})}):W.signUp(e,t).then(function(e){b.a.success("Sign up successfully"),a.setState({modalVisible:!1})}).catch(function(e){b.a.error(e.message),a.setState({modalVisible:!0})})}},a.signOut=function(){return W.signOut().then(function(e){b.a.success("Sign out successfully")})},a.menu=function(){return W.user.email?r.a.createElement(L.a,null,r.a.createElement(L.a.Item,null,r.a.createElement("a",{href:"/profile/"},r.a.createElement(j.a,{type:"user"})," Profile")),r.a.createElement(L.a.Divider,null),r.a.createElement(L.a.Item,null,r.a.createElement("div",{onClick:a.signOut},r.a.createElement(j.a,{type:"export"})," Sign out"))):r.a.createElement(L.a,null,r.a.createElement(L.a.Item,null,r.a.createElement("div",{onClick:a.handleModalOpen},r.a.createElement(j.a,{type:"import"})," Sign in/up")))},a.state={modalVisible:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){W.fetchUserState()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(V.a,{overlay:this.menu,trigger:["click"],placement:"bottomCenter"},r.a.createElement(B.a,{icon:"user",className:"header-container-avatar"})),r.a.createElement(Z,{visible:this.state.modalVisible,showModal:this.handleModalOpen,submit:this.handleModalSubmit,handleModalClose:this.handleModalClose}))}}]),t}(n.Component);Object(z.g)($,{UserDropDown:_.a});var ee=$,te=a(400),ae=(a(379),L.a.SubMenu),ne=[{key:"business",name:"Business",type:"dollar"},{key:"technology",name:"Technology",type:"laptop"},{key:"entertainment",name:"Entertainment",type:"coffee"},{key:"sports",name:"Sports",type:"trophy"},{key:"science",name:"Science",type:"experiment"},{key:"health",name:"Health",type:"heart"}],re=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={visible:!1,placement:"left"},a.showDrawer=function(){a.setState({visible:!0})},a.onClose=function(){a.setState({visible:!1})},a.handleClick=function(e){},a.renderMenu=function(){return r.a.createElement(L.a,{onClick:a.handleClick,style:{width:256},defaultSelectedKeys:["1"],defaultOpenKeys:["sub1","sub2","sub3"],mode:"inline"},r.a.createElement(ae,{key:"sub1",title:r.a.createElement("span",null,r.a.createElement(j.a,{type:"user"}),r.a.createElement("span",null,"My Subscriptions"))},r.a.createElement(L.a.Item,{key:"1"},r.a.createElement(j.a,{type:"eye"}),"My News"),r.a.createElement(L.a.Item,{key:"2"},r.a.createElement(j.a,{type:"pushpin"}),"My Sites")),r.a.createElement(ae,{key:"sub2",title:r.a.createElement("span",null,r.a.createElement(j.a,{type:"solution"}),r.a.createElement("span",null,"Categories"))},ne.map(function(e){return r.a.createElement(L.a.Item,{key:e.key},r.a.createElement(j.a,{type:e.type}),r.a.createElement("a",{style:{display:"initial"},href:"/news/?category=".concat(e.key)},e.name))})))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(D.a,{shape:"circle",icon:"bars",size:"large",onClick:this.showDrawer,style:{border:"none"}}),r.a.createElement(te.a,{placement:"left",title:"GOATNews",onClose:this.onClose,visible:this.state.visible},this.renderMenu()))}}]),t}(n.Component),se=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={current:"mail"},a.handleClick=function(e){console.log("click ",e),a.setState({current:e.key})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"header-container"},r.a.createElement("div",{className:"header-container-title"},r.a.createElement(re,null),r.a.createElement("a",{href:"/"},"GOATNews")),r.a.createElement("div",{className:"header-container-extra"},r.a.createElement("span",{className:"header-container-btn"},r.a.createElement("a",{href:"/news/"},r.a.createElement("div",null,"News"))),r.a.createElement("span",{className:"header-container-btn"},r.a.createElement("a",{href:"/about/"},r.a.createElement("div",null,"About"))),r.a.createElement("span",{className:"header-container-btn"},r.a.createElement("div",null,r.a.createElement(ee,null)))))}}]),t}(n.Component),ie=(a(380),a(405)),le=a(404),ce=(a(140),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).handleError=function(){e.setState({imgErr:!0})},e.state={imgErr:!1},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.state.imgErr?"list"===this.props.type?r.a.createElement(B.a,{shape:"square",size:100,style:{borderRadius:"10px",fontSize:"40px",color:"#13c2c2",backgroundColor:"#e6fffb"}},this.props.source[0]):null:r.a.createElement("img",{alt:"logo",src:this.props.address,onError:this.handleError})}}]),t}(n.Component)),oe=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).handleFollow=function(){C.a.put("http://18.191.243.106:3000/api/user/".concat(W.user.uid),{name:e.state.currentNews.source,type:"source"}).then(function(t){e.setState({following:!e.state.following})}).catch(function(e){return b.a.error("Network error")})},e.isFollow=function(){if(!W.user.channels)return!1;var t="headline";if(e.props.location){var a=e.props.location.search,n=new URLSearchParams(a);t=n.get("news")||n.get("category")||n.get("source")||"headline"}return t in W.user.channels||e.state.following},e.renderBody=function(e){return(e=e.replace(new RegExp(/\r\n/g,"g"),"<br />")).split("\n").map(function(e,t){return r.a.createElement("span",{key:t},e,r.a.createElement("br",null))})},e.state={currentNews:{},following:!1,visible:!1,readFromCache:!1},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id,t={};!W.user.isAnonymous&&W.user.uid&&(t.uid=W.user.uid);var a,n=this,r=window.indexedDB.open("news",1);r.onupgradeneeded=function(e){(a=e.target.result).objectStoreNames.contains("recent")||a.createObjectStore("recent",{keyPath:"id"})},r.onsuccess=function(r){var s=(a=r.target.result).transaction(["recent"]).objectStore("recent").get(parseInt(e));s.onsuccess=function(r){s.result?n.setState({currentNews:s.result}):C.a.get("http://18.191.243.106:3000/api/offline/".concat(e),{params:t}).then(function(e){n.setState({currentNews:e.data});var t=e.data;t.id=t.newsId,a.transaction(["recent"],"readwrite").objectStore("recent").put(t)})}}}},{key:"render",value:function(){var e=this.state.currentNews;return 0===Object.keys(e).length?r.a.createElement("div",{className:"detail-container"},r.a.createElement(N.a,null)):r.a.createElement("div",{className:"detail-container"},r.a.createElement("div",{className:"breadcrumb"},r.a.createElement(ie.a,null,r.a.createElement(ie.a.Item,null,r.a.createElement(I.a,{to:"/"},r.a.createElement(j.a,{type:"home"})," Home")),r.a.createElement(ie.a.Item,null,r.a.createElement(I.a,{to:"/news"},r.a.createElement(j.a,{type:"rise"})," News")),r.a.createElement(ie.a.Item,null,e.title))),r.a.createElement("div",{className:"title"},r.a.createElement("h1",null,e.title)),r.a.createElement("div",{className:"article-info"},r.a.createElement(B.a,{size:64,style:{fontSize:"30px",color:"#13c2c2",backgroundColor:"#e6fffb"}},e.source[0]),r.a.createElement("div",{className:"article-subtitle"},r.a.createElement("div",{className:"source"},e.source),r.a.createElement("div",{className:"post-time"},"Post Time: ",e.time)),r.a.createElement("div",{className:"article-follow"},r.a.createElement(D.a,{shape:"round",onClick:this.handleFollow,disabled:W.user.isAnonymous},r.a.createElement(j.a,{type:"star",theme:this.isFollow()?"filled":""}),this.isFollow()?"Unfollow":"Follow"))),r.a.createElement("div",{className:"article-img"},r.a.createElement(ce,{type:"detail",address:e.img,source:e.source})),r.a.createElement("div",{className:"tags"},"Category: ",r.a.createElement(le.a,{color:"cyan"},e.category)),r.a.createElement("div",{className:"description"},"Description: ",e.summary),r.a.createElement(y.a,null),r.a.createElement("div",{className:"content"},this.renderBody(e.body)),r.a.createElement(y.a,null))}}]),t}(n.Component);Object(z.g)(oe,{NewsDetail:_.a});var ue=oe,me=(a(186),function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e;return this.props.item.hashtags&&(e=this.props.item.hashtags.map(function(e,t){return r.a.createElement(le.a,{color:"cyan",key:t},e)})),r.a.createElement("div",{className:"round-container"},r.a.createElement("div",{className:"content"},r.a.createElement(I.a,{to:{pathname:"/news/".concat(this.props.item.newsId)}},r.a.createElement("div",{className:"title"},this.props.item.title)),r.a.createElement("div",{className:"post-time"},"Posted at: ",this.props.item.time),r.a.createElement("div",{className:"description"},this.props.item.summary),r.a.createElement("div",{className:"tags"},"Hashtags: ",e)),r.a.createElement("div",{className:"image"},r.a.createElement(I.a,{to:{pathname:"/news/".concat(this.props.item.newsId)}},r.a.createElement(ce,{type:"list",address:this.props.item.img,source:this.props.item.source}))))}}]),t}(n.Component)),de=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).parseSearch=function(t){if(e.setState({loading:!0}),t.location.search){var a=t.location.search,n=new URLSearchParams(a);n.get("category")?C.a.get("http://18.191.243.106:3000/api/offline/category/".concat(n.get("category"))).then(function(t){e.setState({news:t.data||[],display:t.data.slice(0,10),category:n.get("category"),loading:!1})}).catch(function(t){b.a.error("Network error"),e.setState({loading:!1})}):n.get("news")?C.a.get("http://18.191.243.106:3000/api/offline/search/".concat(n.get("news"))).then(function(t){console.log(t.data),e.setState({news:t.data||[],display:t.data||[],category:"SEARCH RESULT",loading:!1,hideFollow:!0})}).catch(function(t){b.a.error("Network error"),e.setState({loading:!1})}):n.get("source")&&C.a.get("http://18.191.243.106:3000/api/offline/source/".concat(n.get("source"))).then(function(t){e.setState({news:t.data||[],display:t.data||[],category:n.get("source"),loading:!1})}).catch(function(t){b.a.error("Network error"),e.setState({loading:!1})})}else C.a.get("http://18.191.243.106:3000/api/offline/").then(function(t){e.setState({news:t.data||[],display:t.data.slice(0,10),loading:!1})}).catch(function(t){b.a.error("Network error"),e.setState({loading:!1})})},e.getType=function(e){if(!e.location)return"other";var t=e.location.search,a=new URLSearchParams(t);return a.get("news")?"news":a.get("category")?"category":a.get("source")?"source":"other"},e.handleFollow=function(){C.a.put("http://18.191.243.106:3000/api/user/".concat(W.user.uid),{name:e.state.category,type:e.getType(e.props)}).then(function(t){e.setState({following:!e.state.following})}).catch(function(e){return b.a.error("Network error")})},e.handleMore=function(){var t=e.state.count+1,a=e.state.news.slice(0,10*t);e.setState({count:t,display:a})},e.isFollow=function(){if(!W.user.channels)return!1;var t="headline";if(e.props.location){var a=e.props.location.search,n=new URLSearchParams(a);t=n.get("news")||n.get("category")||n.get("source")||"headline"}return t in W.user.channels||e.state.following},e.state={news:[],display:[],count:1,following:!1,category:"HEADLINE",loading:!1,hideFollow:!1},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.isFollow(this.props),this.parseSearch(this.props)}},{key:"render",value:function(){var e=[];return 0!==this.state.display.length&&(e=this.state.display.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(me,{item:e}),r.a.createElement("br",null))})),r.a.createElement("div",{className:"container"},r.a.createElement("br",null),r.a.createElement("div",{className:"list-headline"},r.a.createElement("h1",{className:"list-title"},this.state.category.toUpperCase()),this.state.hideFollow?r.a.createElement("div",null):r.a.createElement(D.a,{shape:"round",onClick:this.handleFollow,disabled:W.user.isAnonymous},r.a.createElement(j.a,{type:"star",theme:this.isFollow()?"filled":""}),this.isFollow()?"Unfollow":"Follow")),r.a.createElement("div",{className:"list-container"},this.state.loading||W.state.loading?r.a.createElement("div",null,r.a.createElement(O.a,null),r.a.createElement(O.a,null),r.a.createElement(O.a,null)):0===e.length?r.a.createElement(N.a,{description:" "}):e),r.a.createElement(y.a,null,this.state.news.length===this.state.display.length?"No more content":r.a.createElement("div",{className:"read-more"},r.a.createElement(D.a,{onClick:this.handleMore,style:{border:"none"}},"Read More",r.a.createElement(j.a,{type:"down"})))))}}]),t}(n.Component);Object(z.g)(de,{NewsList:_.a});var he=de,pe=a(391),fe=(a(381),a(382),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleUnfollow=function(){W.state.loading=!0,C.a.put("http://18.191.243.106:3000/api/user/".concat(W.user.uid),{name:a.props.name,type:a.props.type}).then(function(e){b.a.success("Delete ".concat(a.props.name," successfully!")),delete W.user.channels[a.props.name],W.state.loading=!1})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(k.a,{className:"item-card"},r.a.createElement("div",{className:"item-container"},r.a.createElement(I.a,{to:"other"===this.props.type?"/news/":"/news/?".concat(this.props.type,"=").concat(this.props.name)},r.a.createElement(B.a,{size:50,style:{color:"#f56a00",backgroundColor:"#fde3cf"}},this.props.name[0].toUpperCase())),r.a.createElement("div",{className:"item-description"},r.a.createElement(I.a,{to:"other"===this.props.type?"/news/":"/news/?".concat(this.props.type,"=").concat(this.props.name)},this.props.name.toUpperCase())),r.a.createElement("div",{className:"item-operation"},r.a.createElement(D.a,{shape:"circle",icon:"delete",type:"danger",disabled:W.user.loading,onClick:this.handleUnfollow}))))}}]),t}(n.Component));Object(z.g)(fe,{FollowedItem:_.a});var ge=fe,Ee=a(194),we=a.n(Ee),be=k.a.Meta,ye=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={news:[],channels:{},loading:!0},a.renderCard=function(){if(W.state.loading)return r.a.createElement(O.a,null);if(0===a.state.news.length)return r.a.createElement(N.a,null);var e=a.state.news;return r.a.createElement("div",{className:"news-card-list"},e.length>0?e.map(function(e,t){return r.a.createElement(I.a,{key:t,to:{pathname:"/news/".concat(e.id),state:{news:e.id}}},r.a.createElement(k.a,{key:t,hoverable:!0,bordered:!1,style:{width:290,margin:"5px"},cover:r.a.createElement("img",{src:e.img,alt:"N/A"})},r.a.createElement(be,{title:e.title}),r.a.createElement("div",null,r.a.createElement(j.a,{type:"clock-circle"}),we()(e.time).fromNow())))}):r.a.createElement("div",{style:{margin:"0 auto"}},r.a.createElement(N.a,null)))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=window.indexedDB.open("news",1);t.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains("recent")||t.createObjectStore("recent",{keyPath:"id"})},t.onsuccess=function(t){t.target.result.transaction(["recent"]).objectStore("recent").openCursor().onsuccess=function(t){var a=t.target.result,n=e.state.news;a?(n.push(a.value),a.continue()):e.setState({news:n})}}}},{key:"render",value:function(){return W.state.loading?r.a.createElement("div",{className:"profile-container"},r.a.createElement("div",{className:"profile-avatar"},r.a.createElement(pe.a,null))):W.user.email?r.a.createElement("div",{className:"profile-container"},r.a.createElement("div",{className:"profile-avatar"},r.a.createElement(B.a,{size:100,icon:"user",src:W.user.photoURL?W.user.photoURL:""}),r.a.createElement("h1",null,"Welcome, ",W.user.displayName||W.user.email),r.a.createElement("br",null)),r.a.createElement("section",{className:"profile-section"},r.a.createElement("h1",null,"My Subscription"),r.a.createElement("div",{className:"subcriptions"},W.user.channels?Object.keys(W.user.channels).map(function(e,t){return r.a.createElement(ge,{name:e,type:W.user.channels[e].type,key:t})}):r.a.createElement("div",{style:{margin:"0 auto"}},r.a.createElement(N.a,null)))),r.a.createElement(y.a,null),r.a.createElement("section",{className:"profile-section"},r.a.createElement("h1",null,"Browsed News"),this.renderCard()),r.a.createElement(y.a,null)):r.a.createElement("div",{className:"profile-container"},r.a.createElement("div",{className:"profile-avatar"},r.a.createElement("h1",null,"You have to Sign in")))}}]),t}(n.Component);Object(z.g)(ye,{ProfileContainer:_.a});var ve=ye,ke=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.item.hashtags&&this.props.item.hashtags.map(function(e){return r.a.createElement(le.a,{color:"cyan"},e)}),r.a.createElement("div",{className:"round-container"},r.a.createElement("div",{className:"content",style:{display:"flex"}},r.a.createElement("div",{className:"image",style:{marginRight:"20px"}},r.a.createElement("a",{href:this.props.item.url},r.a.createElement(ce,{address:this.props.item.img,source:this.props.item.source}))),r.a.createElement("div",null,r.a.createElement("a",{href:this.props.item.url},r.a.createElement("div",{className:"title"},this.props.item.name)),r.a.createElement("div",{className:"post-time"},"Position: ",this.props.item.position),r.a.createElement("div",{className:"description"},this.props.item.description),r.a.createElement("div",{className:"tags",style:{fontSize:"large"}},"Contact me:",r.a.createElement(D.a,{style:{margin:"0 10px"},icon:"github",href:this.props.item.github},"Github"),r.a.createElement(D.a,{icon:"linkedin",href:this.props.item.linkedin},"Linkedin")))))}}]),t}(n.Component),Oe=a(195),Ne=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("br",null),r.a.createElement("div",{className:"list-headline"},r.a.createElement("h1",{className:"list-title"},"ABOUT US")),r.a.createElement("div",{className:"list-container"},Oe.map(function(e,t){return r.a.createElement("div",null,r.a.createElement(ke,{item:e,key:t}),r.a.createElement("br",null))})))}}]),t}(n.Component),je=(a(384),function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(se,null),r.a.createElement(d.a,null,r.a.createElement(h.a,null,r.a.createElement(p.a,{exact:!0,path:"/",component:R}),r.a.createElement(p.a,{exact:!0,path:"/news/:id",component:ue}),r.a.createElement(p.a,{exact:!0,path:"/news/",component:he}),r.a.createElement(p.a,{path:"/profile/",component:ve}),r.a.createElement(f.a,{from:"/rss-pwa/",to:"/"}),r.a.createElement(p.a,{path:"/about/",component:Ne}))),r.a.createElement(g.a,null))}}]),t}(n.Component)),Se=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ce(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;console.log(a),null!=a&&(console.log(a),a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}q.a.initializeApp({apiKey:"AIzaSyDcPG3URrK1keiRvgvvKBCqQkBatgpCnes",authDomain:"rss-pwa-ba0d0.firebaseapp.com",databaseURL:"https://rss-pwa-ba0d0.firebaseio.com",projectId:"rss-pwa-ba0d0",storageBucket:"rss-pwa-ba0d0.appspot.com",messagingSenderId:"764595055848"}),q.a.auth().setPersistence(q.a.auth.Auth.Persistence.SESSION).catch(function(e){return console.log(e)});var Ie=document.createElement("link");Ie.rel="manifest",Ie.href="manifest.json",document.head.appendChild(Ie),i.a.render(r.a.createElement(je,null),document.getElementById("root")),function(e){new URL("",window.location.href).origin===window.location.origin&&window.addEventListener("load",function(){var t="".concat("","/service-worker.js");Se?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Ce(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):Ce(t,e)})}()}},[[198,1,2]]]);
//# sourceMappingURL=main.4acaebf3.chunk.js.map